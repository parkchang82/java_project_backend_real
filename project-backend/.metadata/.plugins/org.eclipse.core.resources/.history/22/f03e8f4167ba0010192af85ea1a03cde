package com.example.demo;

//SecurityConfig.java íŒŒì¼ ìˆ˜ì •
import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.CorsConfigurationSource;

//... filterChain ë©”ì„œë“œ ë‚´ë¶€ ìˆ˜ì •
 http
     .httpBasic(AbstractHttpConfigurer::disable)
     .csrf(AbstractHttpConfigurer::disable)
     
     // ğŸ’¡ ìˆ˜ì •ëœ ë¶€ë¶„: cors() ë©”ì„œë“œë¥¼ ì§ì ‘ ì •ì˜í•©ë‹ˆë‹¤.
     .cors(cors -> cors.configurationSource(corsConfigurationSource()))
     
     .sessionManagement(session -> session
         .sessionCreationPolicy(SessionPolicy.STATELESS));
//...

//CorsConfigurationSource ë¹ˆ ì •ì˜ ì¶”ê°€ (í•„í„° ì²´ì¸ ì™¸ë¶€)
@Bean
public CorsConfigurationSource corsConfigurationSource() {
 CorsConfiguration configuration = new CorsConfiguration();
 configuration.setAllowedOrigins(Arrays.asList("http://localhost:3000")); // í”„ë¡ íŠ¸ì—”ë“œ ì£¼ì†Œ
 configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "DELETE", "OPTIONS"));
 configuration.setAllowedHeaders(Arrays.asList("*"));
 configuration.setAllowCredentials(true);
 UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
 source.registerCorsConfiguration("/**", configuration);
 return source;
}